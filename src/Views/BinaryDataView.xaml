<UserControl x:Class="BinaryDataReaderApp.Views.BinaryDataView" 
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
	xmlns:controls="clr-namespace:BinaryDataReaderApp.Controls" 
	xmlns:models="clr-namespace:BinaryDataReaderApp.Models" 
	xmlns:local="clr-namespace:BinaryDataReaderApp" mc:Ignorable="d" d:DesignHeight="450" d:DesignWidth="800">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="*" />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="*" />
		</Grid.ColumnDefinitions>

		<ScrollViewer VerticalScrollBarVisibility="Visible">
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition Height="*" />
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*" />
					<ColumnDefinition Width="Auto" />
				</Grid.ColumnDefinitions>

				<controls:CustomTreeView Grid.Row="0" Grid.Column="0" SelectedTreeItem="{Binding SelectedPart}" ItemsSource="{Binding BinaryFile.Parts}" PreviewMouseWheel="treeView_PreviewMouseWheel" Padding="5">
					<TreeView.Resources>
						<HierarchicalDataTemplate DataType="{x:Type models:BinarySection}" ItemsSource="{Binding Parts}">
							<TextBlock Text="{Binding Name}" />
						</HierarchicalDataTemplate>
						<DataTemplate DataType="{x:Type models:BinaryValue}">
							<TextBlock>
								<Run Text="{Binding Name}" />
								<Run Text=" = " />
								<Run Text="{Binding Value}" />
								<Run Text=" : " />
								<Run Text="{Binding ValueType}" FontWeight="Bold" />
							</TextBlock>
						</DataTemplate>
					</TreeView.Resources>
				</controls:CustomTreeView>

				<!-- <StackPanel Grid.Row="0" Grid.Column="1" Background="Gray">
					<TextBlock FontFamily="Consolas" Text="{Binding BinaryFile.HexDump}" Margin="5" />
				</StackPanel> -->

				<ItemsControl Grid.Row="0" Grid.Column="1" Background="LightGray" ItemsSource="{Binding BinaryFile.HexDumpLines}" Margin="5">
					<ItemsControl.ItemTemplate>
						<DataTemplate>
							<VirtualizingStackPanel Orientation="Horizontal">
								<TextBlock Text="{Binding Path=ByteOffset, StringFormat={}{0:00000}}" Margin="0,1,8,1" FontFamily="Consolas" />
								<ItemsControl Background="LightGray" ItemsSource="{Binding HexBytes}">
									<ItemsControl.ItemsPanel>
										<ItemsPanelTemplate>
											<VirtualizingStackPanel Orientation="Horizontal" />
										</ItemsPanelTemplate>
									</ItemsControl.ItemsPanel>
									<ItemsControl.ItemTemplate>
										<DataTemplate>
											<TextBlock Text="{Binding Text}" Margin="0,1,3,1" FontFamily="Consolas" />
										</DataTemplate>
									</ItemsControl.ItemTemplate>
								</ItemsControl>
								<!-- <ListBox ItemsSource="{Binding HexBytes}">
									<ListBox.ItemsPanel>
										<ItemsPanelTemplate>
											<VirtualizingStackPanel IsItemsHost="True" Orientation="Horizontal"/>
										</ItemsPanelTemplate>
									</ListBox.ItemsPanel>
								</ListBox> -->
							</VirtualizingStackPanel>
						</DataTemplate>
					</ItemsControl.ItemTemplate>
				</ItemsControl>
			</Grid>
		</ScrollViewer>

	</Grid>
</UserControl>